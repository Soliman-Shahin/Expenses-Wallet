<ion-content class="ion-padding" [fullscreen]="true">
  <div class="login-container" style="min-height: 100%">
    <div class="login-card">
      <!-- App Logo -->
      <div class="logo-container">
        <ion-icon name="wallet-outline" class="app-logo"></ion-icon>
        <h1 class="app-name">Expenses Wallet</h1>
      </div>

      <h2 class="ion-text-center welcome-text">
        {{ "AUTH.WELCOME_BACK" | translate }}
      </h2>
      <p class="ion-text-center subtitle">
        {{ "AUTH.SIGN_IN_TO_CONTINUE" | translate }}
      </p>

      <!-- Social Login Buttons -->
      <div class="social-login-buttons">
        <ion-button
          expand="block"
          fill="outline"
          class="google-btn"
          (click)="signInWithGoogle()"
          [disabled]="isLoading"
        >
          <ion-icon slot="start" name="logo-google"></ion-icon>
          {{ "AUTH.CONTINUE_WITH_GOOGLE" | translate }}
        </ion-button>
      </div>

      <div class="divider">
        <span class="divider-line"></span>
        <span class="divider-text">{{ "AUTH.OR" | translate }}</span>
        <span class="divider-line"></span>
      </div>

      <form
        [formGroup]="loginForm"
        (ngSubmit)="login()"
        class="login-form form-container"
      >
        <!-- Error message display -->
        <ion-note *ngIf="errorMessage" color="danger" class="error-message">
          <ion-icon name="alert-circle-outline"></ion-icon>
          {{ errorMessage }}
        </ion-note>

        <!-- Email Input -->
        <ion-item
          lines="full"
          class="form-item ion-margin-vertical"
          [class.ion-invalid]="
            email?.invalid && (email?.dirty || email?.touched)
          "
        >
          <ion-input
            type="email"
            [formControlName]="formFields.email"
            [placeholder]="'AUTH.EMAIL_PLACEHOLDER' | translate"
            autocomplete="email"
            inputmode="email"
            required
            class="form-input"
          ></ion-input>
          <ion-icon
            slot="start"
            name="mail-outline"
            aria-hidden="true"
          ></ion-icon>
          <ion-note slot="error" *ngIf="email?.errors?.['required']">
            {{ "VALIDATION.REQUIRED" | translate }}
          </ion-note>
          <ion-note slot="error" *ngIf="email?.errors?.['email']">
            {{ "VALIDATION.INVALID_EMAIL" | translate }}
          </ion-note>
        </ion-item>

        <!-- Password Input -->
        <ion-item
          lines="full"
          class="form-item ion-margin-vertical"
          [class.ion-invalid]="
            password?.invalid && (password?.dirty || password?.touched)
          "
        >
          <ion-input
            [type]="hide ? 'password' : 'text'"
            [formControlName]="formFields.password"
            [placeholder]="'AUTH.PASSWORD_PLACEHOLDER' | translate"
            autocomplete="current-password"
            required
            class="form-input"
          ></ion-input>
          <ion-icon
            slot="start"
            name="lock-closed-outline"
            aria-hidden="true"
          ></ion-icon>
          <ion-button
            fill="clear"
            slot="end"
            [attr.aria-label]="
              (hide ? 'SHOW_PASSWORD' : 'HIDE_PASSWORD') | translate
            "
            (click)="togglePasswordVisibility()"
            type="button"
          >
            <ion-icon
              [name]="hide ? 'eye-outline' : 'eye-off-outline'"
            ></ion-icon>
          </ion-button>
          <ion-note slot="error" *ngIf="password?.errors?.['required']">
            {{ "VALIDATION.REQUIRED" | translate }}
          </ion-note>
          <ion-note slot="error" *ngIf="password?.errors?.['minlength']">
            {{ "VALIDATION.MIN_LENGTH" | translate : { min: 6 } }}
          </ion-note>
        </ion-item>

        <!-- Remember Me & Forgot Password -->
        <div class="form-options">
          <ion-item lines="none" class="remember-me">
            <ion-checkbox
              slot="start"
              [formControlName]="formFields.rememberMe"
            ></ion-checkbox>
            <ion-label>{{ "AUTH.REMEMBER_ME" | translate }}</ion-label>
          </ion-item>
          <ion-button
            fill="clear"
            size="small"
            routerLink="/auth/forgot-password"
            class="forgot-password"
          >
            {{ "AUTH.FORGOT_PASSWORD" | translate }}
          </ion-button>
        </div>

        <!-- Submit Button -->
        <ion-button
          type="submit"
          expand="block"
          [disabled]="loginForm.invalid || isLoading"
          class="login-button"
          [class.loading]="isLoading"
        >
          <ion-spinner
            *ngIf="isLoading"
            name="crescent"
            class="ion-margin-end"
          ></ion-spinner>
          <span *ngIf="!isLoading">{{ "AUTH.SIGN_IN" | translate }}</span>
        </ion-button>
      </form>

      <!-- Sign Up Link -->
      <div class="signup-link ion-text-center">
        {{ "AUTH.DONT_HAVE_ACCOUNT" | translate }}
        <a routerLink="/auth/signup" class="signup-text">{{
          "AUTH.SIGN_UP" | translate
        }}</a>
      </div>
    </div>
  </div>
</ion-content>
